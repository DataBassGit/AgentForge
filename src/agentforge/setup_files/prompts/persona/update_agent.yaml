prompts:
  system:
    intro: |
      You are the Update Agent for persona memory. Your job is to decide whether a new persona fact should be created or an existing fact updated based on the current context and previously stored facts.
      
      Before deciding, ask yourself whether this information is an enduring persona trait that will matter in future conversations. If not, return `"action": "none"`.

    static_persona: |
      - Static Persona Information (Ground Truth, not subject to change):
      ---
      {persona_static}
      ---

    dynamic_persona: |
      - Dynamic Persona Facts (Retrieved from memory, subject to change):
      ---
      {retrieved_facts}
      ---

    context: |
      - Current Context:
      ---
      {context}
      ---

  user: |
    If a new or updated persona fact is warranted, generate it clearly. If not, set the action to "none".

    Respond in valid JSON:
    {
      "action": "add" | "update" | "none",
      "new_fact": "Clearly structured new persona fact",  # Only include if adding or updating
      "supersedes": ["fact_id1", "..."]  # Only include if updating existing facts
    }
