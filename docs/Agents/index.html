<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgentForge Documentation | Open Source AI Agent Framework</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Documentation browser for AgentForge - Open Source AI Agent Framework for Building Cognitive Architectures">
    <meta name="keywords" content="AgentForge, AI agents, cognitive architecture, customizable agents, AI framework, open source">
    <meta name="author" content="AgentForge">

    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:title" content="AgentForge Documentation Browser">
    <meta property="og:description" content="Browse documentation for AgentForge - Open Source AI Agent Framework for Building Cognitive Architectures">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://agentforge.net/docs">
    <meta property="og:image" content="https://agentforge.net/images/logo.png">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="AgentForge Documentation">
    <meta name="twitter:description" content="Comprehensive documentation for the AgentForge AI agent framework">
    <meta name="twitter:image" content="https://agentforge.net/images/logo.png">

    <!-- Favicon -->
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

    <!-- CSS Styles -->
    <style>
        /* CSS Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }

        header {
            background-color: #2c3e50;
            color: white;
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 2rem;
        }

        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }

        nav ul li a:hover {
            color: #3498db;
        }

        main {
            display: flex;
            min-height: calc(100vh - 120px);
        }

        .sidebar {
            width: 280px;
            background-color: #34495e;
            color: white;
            padding: 1.5rem;
        }

        .sidebar h3 {
            margin-bottom: 1.2rem;
            font-size: 1.3rem;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            padding-bottom: 0.5rem;
        }

        .sidebar ul {
            list-style: none;
        }

        .sidebar ul li {
            margin-bottom: 0.5rem;
        }

        .sidebar ul li a {
            color: #ecf0f1;
            text-decoration: none;
            display: block;
            padding: 0.5rem;
            border-radius: 4px;
            transition: background-color 0.3s;
        }

        .sidebar ul li a:hover {
            background-color: #2c3e50;
        }

        .content {
            flex: 1;
            padding: 2rem;
            background-color: white;
            box-shadow: -2px 0 5px rgba(0,0,0,0.05);
        }

        .content h1 {
            margin-bottom: 1.5rem;
            color: #2c3e50;
            font-size: 2.2rem;
        }

        .content h2 {
            margin: 1.5rem 0 1rem;
            color: #34495e;
            font-size: 1.8rem;
        }

        .content h3 {
            margin: 1.2rem 0 0.8rem;
            color: #2c3e50;
            font-size: 1.4rem;
        }

        .content p {
            margin-bottom: 1rem;
            line-height: 1.7;
        }

        .content code {
            background-color: #f8f8f8;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: monospace;
            color: #e74c3c;
        }

        .content pre {
            background-color: #f8f8f8;
            padding: 1.2rem;
            border-radius: 6px;
            overflow-x: auto;
            margin-bottom: 1.5rem;
            border: 1px solid #eee;
        }

        footer {
            background-color: #2c3e50;
            color: white;
            text-align: center;
            padding: 1.5rem;
            font-size: 0.9rem;
        }

        /* Custom styles for documentation browser */
        #file-tree {
            margin-bottom: 1.5rem;
        }

        #file-tree .directory {
            font-weight: bold;
            cursor: pointer;
            padding: 0.4rem 0.2rem;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        #file-tree .directory:hover {
            background-color: rgba(255,255,255,0.1);
        }

        #file-tree .file {
            cursor: pointer;
            padding: 0.3rem 0.2rem;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        #file-tree .file:hover {
            background-color: rgba(255,255,255,0.1);
        }

        #file-tree .selected {
            background-color: #3498db;
            color: white;
        }

        #content-display {
            border: 1px solid #eee;
            border-radius: 6px;
            padding: 1.5rem;
            min-height: 500px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        /* Feature badges */
        .feature-badge {
            display: inline-block;
            background-color: #3498db;
            color: white;
            padding: 0.3rem 0.6rem;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }

        /* Mobile responsiveness */
        @media (max-width: 768px) {
            main {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
            }

            header {
                flex-direction: column;
                text-align: center;
                padding: 1rem;
            }

            nav ul {
                margin-top: 1rem;
                flex-wrap: wrap;
                justify-content: center;
            }

            nav ul li {
                margin: 0.3rem 0.8rem;
            }

            .content {
                padding: 1.2rem;
            }
        }
    </style>

    <!-- External CSS Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/styles/atom-one-dark.min.css">

    <!-- JavaScript Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/markdown-it/12.3.2/markdown-it.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/highlight.min.js"></script>
</head>
<body>
    <header>
        <div class="logo">AgentForge Documentation</div>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="#agents">Agents</a></li>
                <li><a href="#tools">Tools & Actions</a></li>
                <li><a href="#personas">Personas</a></li>
                <li><a href="https://github.com/databassgit/agentforge" target="_blank">GitHub</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <aside class="sidebar">
            <h3>Repository Files</h3>
            <div id="file-tree">
                <!-- File tree will be populated by JavaScript -->
                <p>Loading repository files...</p>
            </div>
        </aside>

        <section class="content">
            <h1>AgentForge Documentation Browser</h1>
            <p>Welcome to the AgentForge documentation - your comprehensive resource for building cognitive architectures with our open source AI agent framework. Select a file from the repository to view its contents.</p>

            <div class="feature-badges">
                <span class="feature-badge">Customizable Agents</span>
                <span class="feature-badge">Tools & Actions</span>
                <span class="feature-badge">Persona Management</span>
                <span class="feature-badge">Flexible Storage</span>
                <span class="feature-badge">Cognitive Architectures</span>
            </div>

            <div id="content-display">
                <p>Select a file to view its content.</p>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 AgentForge - Open Source AI Agent Framework for Building Cognitive Architectures.</p>
        <p>Powered by GitHub API, markdown-it, and highlight.js.</p>
    </footer>

    <script>
        // GitHub API access
        const githubApiUrl = 'https://api.github.com/repos/databassgit/agentforge/contents';
        const token = ''; // Token should be populated by the user if needed

        // Markdown renderer setup
        const md = window.markdownit({
            html: true,
            linkify: true,
            typographer: true,
            highlight: function (str, lang) {
                if (lang && hljs.getLanguage(lang)) {
                    try {
                        return hljs.highlight(str, { language: lang }).value;
                    } catch (__) {}
                }
                return ''; // Use external default escaping
            }
        });

        // DOM elements
        const fileTree = document.getElementById('file-tree');
        const contentDisplay = document.getElementById('content-display');

        // Fetch repository contents
        async function fetchRepoContents(path = '') {
            const url = path ? `${githubApiUrl}/${path}` : githubApiUrl;

            try {
                const headers = token ? { Authorization: `token ${token}` } : {};
                const response = await fetch(url, { headers });

                if (!response.ok) {
                    throw new Error(`GitHub API error: ${response.status}`);
                }

                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Error fetching repository contents:', error);
                fileTree.innerHTML = `<p>Error loading repository: ${error.message}</p>`;
                return [];
            }
        }

        // Build file tree
        async function buildFileTree(path = '') {
            const contents = await fetchRepoContents(path);

            if (!contents || !contents.length) {
                return '';
            }

            // Sort directories first, then files
            contents.sort((a, b) => {
                if (a.type === b.type) {
                    return a.name.localeCompare(b.name);
                }
                return a.type === 'dir' ? -1 : 1;
            });

            let html = '<ul>';

            for (const item of contents) {
                const itemPath = path ? `${path}/${item.name}` : item.name;

                if (item.type === 'dir') {
                    html += `
                        <li>
                            <div class="directory" data-path="${itemPath}">📁 ${item.name}</div>
                            <div class="directory-contents" id="dir-${itemPath}" style="display: none;"></div>
                        </li>
                    `;
                } else {
                    html += `<li><div class="file" data-path="${itemPath}">📄 ${item.name}</div></li>`;
                }
            }

            html += '</ul>';
            return html;
        }

        // Fetch and display file content
        async function fetchFileContent(path) {
            try {
                const headers = token ? { Authorization: `token ${token}` } : {};
                const response = await fetch(`${githubApiUrl}/${path}`, { headers });

                if (!response.ok) {
                    throw new Error(`GitHub API error: ${response.status}`);
                }

                const data = await response.json();
                const content = atob(data.content); // Decode base64 content

                // Determine file type and render accordingly
                const fileExtension = path.split('.').pop().toLowerCase();

                if (['md', 'markdown'].includes(fileExtension)) {
                    // Render markdown
                    contentDisplay.innerHTML = md.render(content);
                } else if (['js', 'ts', 'py', 'java', 'c', 'cpp', 'cs', 'go', 'rb', 'php', 'html', 'css', 'json', 'xml'].includes(fileExtension)) {
                    // Render code with syntax highlighting
                    contentDisplay.innerHTML = `<pre><code class="language-${fileExtension}">${escapeHtml(content)}</code></pre>`;
                    document.querySelectorAll('pre code').forEach((block) => {
                        hljs.highlightElement(block);
                    });
                } else {
                    // Render as plain text
                    contentDisplay.innerHTML = `<pre>${escapeHtml(content)}</pre>`;
                }

                // Add file name as heading
                const fileName = path.split('/').pop();
                contentDisplay.innerHTML = `<h2>${fileName}</h2>${contentDisplay.innerHTML}`;

                // Add structured data for SEO
                addStructuredData(fileName, path);

            } catch (error) {
                console.error('Error fetching file content:', error);
                contentDisplay.innerHTML = `<p>Error loading file: ${error.message}</p>`;
            }
        }

        // Add structured data for SEO
        function addStructuredData(fileName, path) {
            // Remove any existing structured data
            const existingScript = document.getElementById('structured-data');
            if (existingScript) {
                existingScript.remove();
            }

            // Create structured data for technical documentation
            const structuredData = {
                "@context": "https://schema.org",
                "@type": "TechArticle",
                "headline": `AgentForge Documentation: ${fileName}`,
                "description": `Technical documentation for ${fileName} in the AgentForge AI agent framework.`,
                "author": {
                    "@type": "Organization",
                    "name": "AgentForge"
                },
                "publisher": {
                    "@type": "Organization",
                    "name": "AgentForge",
                    "logo": {
                        "@type": "ImageObject",
                        "url": "https://agentforge.net/images/logo.png"
                    }
                },
                "datePublished": new Date().toISOString().split('T')[0],
                "dateModified": new Date().toISOString().split('T')[0]
            };

            // Add structured data to page
            const script = document.createElement('script');
            script.id = 'structured-data';
            script.type = 'application/ld+json';
            script.innerHTML = JSON.stringify(structuredData);
            document.head.appendChild(script);
        }

        // Helper to escape HTML
        function escapeHtml(unsafe) {
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

        // Initialize the documentation browser
        async function initDocBrowser() {
            fileTree.innerHTML = await buildFileTree();

            // Event delegation for file tree interactions
            fileTree.addEventListener('click', async (event) => {
                const target = event.target;

                if (target.classList.contains('directory')) {
                    const path = target.dataset.path;
                    const dirContentsEl = document.getElementById(`dir-${path}`);

                    if (dirContentsEl.style.display === 'none') {
                        // Expand directory
                        dirContentsEl.style.display = 'block';

                        // If directory contents haven't been loaded yet
                        if (!dirContentsEl.innerHTML.trim()) {
                            dirContentsEl.innerHTML = 'Loading...';
                            dirContentsEl.innerHTML = await buildFileTree(path);
                        }
                    } else {
                        // Collapse directory
                        dirContentsEl.style.display = 'none';
                    }
                } else if (target.classList.contains('file')) {
                    // Remove selected class from all files
                    document.querySelectorAll('.file').forEach(file => {
                        file.classList.remove('selected');
                    });

                    // Add selected class to clicked file
                    target.classList.add('selected');

                    // Display file content
                    const path = target.dataset.path;
                    contentDisplay.innerHTML = 'Loading file content...';
                    await fetchFileContent(path);
                }
            });
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', initDocBrowser);
    </script>
</body>
</html>
